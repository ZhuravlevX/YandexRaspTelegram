# Yandex Rasp Telegram (Python)  
  
**Yandex Raspisaniye Telegram** *(Python)* – это бот написанный на языке «Python», позволяющий узнать расписание ближайших электричек от станции отправления.  
### Откуда берутся данные об расписаниях  

Информацию об расписаниях бот получает благодаря [Яндекс.Расписаний](https://t.rasp.yandex.ru/) и выводит их сообщением. Данные бот получает при помощи [API Яндекс.Расписаний](https://yandex.ru/dev/rasp/). API организован в соответствии с принципами REST. Взаимодействие с API осуществляется по протоколу HTTPS посредством GET-запросов. Сервис возвращает данные в форматах: JSON, XML.  

### Функционал бота  
  
- Вывод актуальных расписаний электричек на текущую дату по указанному направлению при условии, если нет автообновления у другого расписания.  
- Изменение направления маршрута в расписании.  
- Автообновление последнего вызванного пользователем расписание в течение часа, а также в случае необходимости отмены авто-обновления.  
- Информирование о том, что бот завершил работы по каким-то причинам.  
- Случайное отображение фотографий электричек для разнообразия.  

### Расписание  
  
Бот при вызове расписания выводит следующую информацию:  
- Номер поезда и направление с сообщением.  
- Откуда отправляется и во сколько.  
- Остановки вовремя поездки.  
- Стоимость билета в рублях и других валютах.  
- Тип поезда, например: «Стандарт плюс» и компания, обслуживающая данную электричку.  
  
Если отсутствует информация в одном из полей, будет писать что данная информация неизвестна. В случае изменения оформления расписания бота или дополнение расписание дополнительной информацией об электричке, ознакомьтесь с документацией [«Расписание рейсов по станции»](https://yandex.ru/dev/rasp/doc/ru/reference/schedule-on-station) на [API Яндекс.Расписание](https://yandex.ru/dev/rasp/doc/ru/).  
  
### Установка бота  

 В данном боте используются следующие модули, требуемые к установке:  
 - `Aiogram` – версии 3.15.0  
 - `Requests` – версии 2.32.3  
 - `Babel` – версии 2.16.0  
 - `Pytz` – версии 2024.2  
 - `Python-dotenv` - версии 1.0.1
 - `Pydantic` - версии 2.10.4
  
Для установки всех модулей проекта, воспользуйтесь файлом `module.bat`, который установит все модули глобально в Python. Также в проекте присуствует файл `requirements.txt`, которым вы также можете воспользоваться.

Для того чтобы бот функционировал, необходимо создать в корневой папке файл с именем `.env` и впишите туда следующие параметры:

```
TOKEN_YANDEX=Токен_Яндекс_Расписаний  
TOKEN_BOT=Токен_бота
```
Без данного файла, бот функционировать **не будет**.

### Конфигурация бота  

В боте вы можете поменять значения по своему удобству и желанию. На текущий момент для изменения, доступны следующие параметры:  
- `token_yandex` – токен Яндекса, который нужно получить на сайте [API Яндекс Расписаний](https://yandex.ru/dev/rasp/raspapi#examples), иначе бот работать не будет.  
- `token_bot` – токен бота Telegram на который будут отправляться данные и получать ответные, который можно получить у [BotFather](https://telegram.me/botfather).  
- `image_url` – ссылка изображений, которые будут случайно выводиться. Формат `.webp` не поддерживается, иначе бот не будет корректно работать.  
- `emoji_map` – смайлики под типы поездов, таких как например: "Стандарт плюс", "Ласточка", "Ласточка «Экспресс»". Можно изменять и добавлять новые.  

### Авторы и авторские права  

Данный бот имеет лицензию **«MIT License»**. Поскольку авторские права на данную лицензию отсутствует, другие имеют право использовать и изменять её для удовлетворения своих целей.  
  
- **ZhuravlevX** – идея и реализатор идеи на Python.  
- **KryptonFox** – реализатор идеи JavaScript и Python.  
  
Исходником данных об расписаниях является [Яндекс.Расписания](https://t.rasp.yandex.ru/).