<p align="center">
    <h1 align="center">Yandex Rasp Telegram </h1>
</p>

<p align="center">
    <a href="https://status.badgen.net/"><img src="https://badgen.net/badge/telegram/bot/blue?icon=telegram" /></a>
    <a href="https://github.com/ZhuravlevX/YandexRaspTelegram/releases/tag/v1.0.0"><img src="https://badgen.net/badge/releases/v1.0.0/green?icon=github" /></a>
    <a href="https://yandex.ru/dev/rasp/doc/ru/"><img src="https://badgen.net/badge/yandex/documentation/yellow" /></a>
    <a href="https://github.com/ZhuravlevX"><img src="https://badgen.net/badge/github/zhuravlevx/purple?icon&label" /></a>
    <a href="https://github.com/KryptonFox"><img src="https://badgen.net/badge/github/kryptonfox/blue?icon&label" /></a>
    <a href="LICENSE.md"><img src="https://badgen.net/static/license/MIT/purple"/></a>
</p>

**Yandex Raspisaniye Telegram** – это бот написанный на языке «Python», позволяющий узнать расписание ближайших электричек или поездов по указанному маршруту пользователя, который он указывает. Поддерживает страны России и Беларуси.  

### Откуда берутся данные об расписаниях  

Данные бот получает при помощи [API Яндекс.Расписаний](https://yandex.ru/dev/rasp/). API организован в соответствии с принципами REST. Взаимодействие с API осуществляется по протоколу HTTPS посредством GET-запросов. Сервис возвращает данные в форматах: JSON, XML. В нашем случае, бот получает данные в JSON формате.

### Функционал бота  
  
- Вывод актуальных расписаний электричек или поездов на текущую дату по указанному маршруту пользователем.  
- Изменение маршрута пользователем для расписаний. 
- Автообновление последнего вызванного пользователем расписание в течение часа, а также в случае необходимости отмены автообновления.
- Случайные изображения электричек для разнообразия глаза. 

### Расписание  
  
Бот при вызове расписания выводит следующую информацию:  
- Номер поезда и направление с сообщением, например: "_6411 | Быково — Москва (Казанский вокзал)_".  
- С какого пути отправляется и во сколько прибудет, например: "_Отправляется с 2 путь в 12:24_".  
- С какими остановками проследует электричка или поезд, например: "_С остановками: везде_".  
- Стоимость билета в рублях, например: "_Стоимость билета: 48 рублей_".  
- Тип поезда и компания, обслуживающая данную электричку, например: "_Иволга | Центральная ППК/Московско-Тверская ППК_".
- Время до прибывания поезда на станцию или платформу, например: "_Время до прибытия: 19 минут_"
  
Если отсутствует информация в одном из полей, будет заменяться это на слово "Неизвестно".
  
### Установка бота  

 В данном боте используются следующие модули, требуемые к установке:  
 - `Aiogram` – версии 3.15.0  
 - `Requests` – версии 2.32.3  
 - `Babel` – версии 2.16.0  
 - `Pytz` – версии 2024.2  
 - `Python-dotenv` - версии 1.0.1
 - `Pydantic` - версии 2.10.4
 - `Json5` - версии 0.10.0
  
Для установки всех модулей проекта, присутствует файл `requirements.txt`, которым можно воспользоваться при помощи команды в терминале проекта.
```
pip install -r requirements.txt
```

Для того чтобы бот функционировал, необходимо создать в корневой папке файл с именем `.env` и впишите туда следующие параметры:

```
TOKEN_YANDEX=Токен_Яндекс_Расписаний  
TOKEN_BOT=Токен_telegram_бота
```
Без данного файла, бот функционировать **не будет**.

### Конфигурация бота  

В боте вы можете поменять значения по своему удобству и желанию. На текущий момент для изменения, доступны следующие параметры:  
- `token_yandex` – токен Яндекса, который нужно получить на сайте [API Яндекс Расписаний](https://yandex.ru/dev/rasp/raspapi#examples), иначе бот работать не будет.  
- `token_bot` – токен бота Telegram на который будут отправляться данные. Сам токен можно получить у [BotFather](https://telegram.me/botfather).  
- `image_url` – ссылка изображений, которые будут случайно изображаться. Формат `.webp` не поддерживается, иначе бот не будет корректно работать.  
- `emoji_map` – эмотиконы под типы поездов, таких как например: "Стандарт плюс", "Ласточка", "Ласточка «Экспресс»". Можно изменять и добавлять новые.  

### Авторы и авторские права  

Данный бот имеет лицензию **«MIT License»**. Поскольку авторские права на данную лицензию отсутствует, другие имеют право использовать и изменять её для удовлетворения своих целей.  
  
- **[ZhuravlevX](https://github.com/ZhuravlevX)** – реализатор идеи на Python.  
- **[KryptonFox](https://github.com/KryptonFox)** – реализатор идеи на Python _(В дальнейшем на JavaScript или Rust)_.  
  
Исходником данных и информации об расписаниях является [Яндекс.Расписания](https://t.rasp.yandex.ru/).